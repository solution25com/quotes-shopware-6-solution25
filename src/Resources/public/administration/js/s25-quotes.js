(function(){var e={856:function(){},819:function(e,t,r){var i=r(856);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),r(346).Z("e587764a",i,!0,{})},346:function(e,t,r){"use strict";function i(e,t){for(var r=[],i={},s=0;s<t.length;s++){var a=t[s],o=a[0],n={id:e+":"+s,css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(n):r.push(i[o]={id:o,parts:[n]})}return r}r.d(t,{Z:function(){return h}});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=s&&(document.head||document.getElementsByTagName("head")[0]),n=null,c=0,l=!1,d=function(){},u=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,r,s){l=r,u=s||{};var o=i(e,t);return w(o),function(t){for(var r=[],s=0;s<o.length;s++){var n=a[o[s].id];n.refs--,r.push(n)}t?w(o=i(e,t)):o=[];for(var s=0;s<r.length;s++){var n=r[s];if(0===n.refs){for(var c=0;c<n.parts.length;c++)n.parts[c]();delete a[n.id]}}}}function w(e){for(var t=0;t<e.length;t++){var r=e[t],i=a[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(C(r.parts[s]));i.parts.length>r.parts.length&&(i.parts.length=r.parts.length)}else{for(var o=[],s=0;s<r.parts.length;s++)o.push(C(r.parts[s]));a[r.id]={id:r.id,refs:1,parts:o}}}}function g(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function C(e){var t,r,i=document.querySelector("style["+m+'~="'+e.id+'"]');if(i){if(l)return d;i.parentNode.removeChild(i)}if(p){var s=c++;t=y.bind(null,i=n||(n=g()),s,!1),r=y.bind(null,i,s,!0)}else t=v.bind(null,i=g()),r=function(){i.parentNode.removeChild(i)};return t(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&t(e=i):r()}}var f=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}();function y(e,t,r,i){var s=r?"":i.css;if(e.styleSheet)e.styleSheet.cssText=f(t,s);else{var a=document.createTextNode(s),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function v(e,t){var r=t.css,i=t.media,s=t.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute(m,t.id),s&&(r+="\n/*# sourceURL="+s.sources[0]+" */\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={id:i,exports:{}};return e[i](a,a.exports,r),a.exports}r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="bundles/s25quotes/",window?.__sw__?.assetPath&&(r.p=window.__sw__.assetPath+"/bundles/s25quotes/"),function(){"use strict";let{Component:e}=Shopware;e.register("sw-customer-select",{template:'<template>\n  <div>\n    <sw-card title="Select Customer">\n      <sw-simple-search-field \n        v-model:value="searchTerm" \n        placeholder="Search for customers..."\n        @search="onSearch"\n      />\n      <sw-data-grid\n              :dataSource="customerOptions"\n              :columns="columns"\n              :isLoading="isLoading"\n              :identifier="\'id\'"\n              :showSelection="true"\n              :selectedItems="selectedItems"\n              @selectItem="onSelectCustomer"\n      >\n\n      <template #column-name="{ item }">\n          {{ item.label }}\n        </template>\n        <template #column-customerNumber="{ item }">\n          {{ item.customerNumber }}\n        </template>\n        <template #column-email="{ item }">\n          {{ item.email }}\n        </template>\n      </sw-data-grid>\n\n       <sw-pagination\n          :total="totalCustomers"\n          :limit="limit"\n          :page="page"\n          @pageChange="onPageChange">\n       </sw-pagination>\n    </sw-card>\n  </div>\n</template>\n',inject:["repositoryFactory"],props:{value:{type:String,required:!1,default:null}},data(){return{selectedCustomer:this.value,customerOptions:[],isLoading:!1,searchTerm:"",totalCustomers:0,page:1,limit:10,columns:[{property:"label",label:"Name",allowResize:!0},{property:"customerNumber",label:"Customer Number",allowResize:!0},{property:"email",label:"Email",allowResize:!0}]}},watch:{value(e){this.selectedCustomer=e},selectedCustomer(e){this.$emit("update:value",e)},searchTerm:{handler(){this.fetchCustomers(!0)},immediate:!1}},created(){this.fetchCustomers()},computed:{selectedItems(){if(!this.selectedCustomer)return{};let e=this.customerOptions.find(e=>e.id===this.selectedCustomer);return e?{[e.id]:e}:{}}},methods:{async fetchCustomers(e=!1){e&&(this.page=1),this.isLoading=!0;try{let e=this.createCriteria(),t=await this.repositoryFactory.create("customer").search(e,Shopware.Context.api);this.customerOptions=t.map(e=>({id:e.id,label:`${e.firstName} ${e.lastName}`,customerNumber:e.customerNumber,email:e.email})),this.totalCustomers=t.total}catch(e){console.error("Error fetching customers:",e.response?.data||e)}finally{this.isLoading=!1}},onSearch(){this.fetchCustomers(!0)},onPageChange(e){if(console.log("Raw Page Change Event:",e),"object"==typeof e&&e.page&&(e=e.page),"number"!=typeof e||e<=0){console.error("Invalid page number:",e);return}console.log("Page changed to:",e),this.page=parseInt(e,10),this.fetchCustomers()},onSelectCustomer(e){let t=Object.values(e)[0];t&&(this.selectedCustomer=t.id,this.$emit("update:value",t.id))},createCriteria(){let e=Number.isInteger(this.page)&&this.page>0?this.page:1,t=new Shopware.Data.Criteria(e,this.limit);return t.setLimit(this.limit),t.setPage(this.page),this.searchTerm&&this.searchTerm.trim().length>0&&t.addFilter(Shopware.Data.Criteria.multi("OR",[Shopware.Data.Criteria.contains("firstName",this.searchTerm),Shopware.Data.Criteria.contains("lastName",this.searchTerm),Shopware.Data.Criteria.contains("email",this.searchTerm),Shopware.Data.Criteria.contains("customerNumber",this.searchTerm)])),t}}});let{Component:t}=Shopware;t.register("sw-product-select",{template:'<template>\n  <sw-card title="Select Product">\n    <sw-simple-search-field \n      v-model:value="searchTerm" \n      placeholder="Search for products..."\n      @search="onSearch"\n    />\n\n    <sw-data-grid\n      :dataSource="productOptions"\n      :columns="columns"\n      :isLoading="isLoading"\n      :identifier="\'id\'"\n      :showSelection="true"\n      @selectItem="onSelectProduct"\n    >\n      <template #column-name="{ item }">\n        {{ item.label }}\n      </template>\n    </sw-data-grid>\n\n    <sw-pagination\n      :total="totalProducts"\n      :page="page"\n      :limit="limit"\n      @pageChange="onPageChange"\n    />\n  </sw-card>\n</template>\n',inject:["repositoryFactory"],props:{value:{type:String,required:!1,default:null}},data(){return{productOptions:[],selectedProduct:this.value,isLoading:!1,searchTerm:"",totalProducts:0,page:1,limit:10,columns:[{property:"label",label:"Product Name",allowResize:!0}]}},watch:{value(e){this.selectedCustomer=e},selectedProduct(e){this.$emit("update:value",e)},searchTerm(){this.fetchProducts(!0)}},created(){this.fetchProducts()},methods:{async fetchProducts(e=!1){e&&(this.page=1),this.isLoading=!0;try{let e=this.createCriteria(),t=await this.repositoryFactory.create("product").search(e,Shopware.Context.api);this.productOptions=t.map(e=>({id:e.id,label:e.name})),this.totalProducts=t.total}catch(e){}finally{this.isLoading=!1}},createCriteria(){let e=new Shopware.Data.Criteria(this.page,this.limit);return e.setLimit(this.limit),e.setPage(this.page),this.searchTerm&&e.addFilter(Shopware.Data.Criteria.multi("OR",[Shopware.Data.Criteria.contains("name",this.searchTerm),Shopware.Data.Criteria.contains("productNumber",this.searchTerm)])),e},onPageChange(e){"object"==typeof e&&e.page&&(e=e.page),"number"!=typeof e||e<=0||(this.page=parseInt(e,10),this.fetchProducts())},onSearch(){this.fetchProducts(!0)},onSelectProduct(e){let t=Object.values(e)[0];t&&(this.selectedProduct=t.id)}}});let{Component:i,Mixin:s}=Shopware;i.register("sw-data-csv",{template:'<template>\n    <div class="custom-price-csv-import">\n        <input\n                type="file"\n                ref="csvFileInput"\n                @change="handleFileUpload"\n                accept=".csv"\n                style="display: none"\n        />\n        <sw-button @click="triggerFileUpload">\n             Import CSV\n        </sw-button>\n    <sw-button @click="exportCSV" :disabled="isExporting">\n         Export CSV\n    </sw-button>\n    </div>\n</template>\n',inject:["repositoryFactory"],mixins:[s.getByName("notification")],emits:["import-complete"],data(){return{isProcessing:!1,isExporting:!1}},methods:{triggerFileUpload(){this.$refs.csvFileInput.click()},async handleFileUpload(e){let t=e.target.files[0];if(!t)return;this.$emit("import-start"),await this.$nextTick(),await new Promise(e=>setTimeout(e,100));let r=new FileReader;r.onload=async e=>{let t=e.target.result,r=this.parseCSV(t);await this.processCSVData(r),this.$emit("import-finish")},r.readAsText(t)},parseCSV(e){let t=e.split("\n"),r=t[0].split(",").map(e=>e.trim());return t.slice(1).map(e=>{let t=e.split(",");return r.reduce((e,r,i)=>(e[r]=t[i]?t[i].trim():"",e),{})}).filter(e=>e["Customer ID"]&&e.SKU&&e["Custom WS Price"])},async processCSVData(e){try{for(let t of e){let e=await this.getCustomerUUID(t["Customer ID"]),r=await this.getProductUUID(t.SKU),i=parseFloat(t["Custom WS Price"]);e&&r&&!isNaN(i)&&await this.saveCustomPrice(e,r,i)}this.$emit("import-finish"),this.createNotificationSuccess({title:"Import Success",message:"CSV data has been imported successfully!"})}catch(e){console.error("Import Error:",e),this.createNotificationError({title:"Import Error",message:"There was an issue importing the CSV file. Please try again."})}},async getCustomerUUID(e){let t=this.repositoryFactory.create("customer"),r=new Shopware.Data.Criteria(1,1);r.addFilter(Shopware.Data.Criteria.equals("id",e));let i=await t.search(r,Shopware.Context.api);return i.total>0?i.first().id:null},async getProductUUID(e){let t=this.repositoryFactory.create("product"),r=new Shopware.Data.Criteria(1,1);r.addFilter(Shopware.Data.Criteria.equals("productNumber",e));let i=await t.search(r,Shopware.Context.api);return i.total>0?i.first().id:null},async saveCustomPrice(e,t,r){let i;let s=this.repositoryFactory.create("custom_price"),a=this.repositoryFactory.create("tax"),o=this.repositoryFactory.create("product"),n=await o.get(t,Shopware.Context.api),c=(await a.get(n.taxId,Shopware.Context.api)).taxRate||0,l=new Shopware.Data.Criteria(1,1);l.addFilter(Shopware.Data.Criteria.equals("customerId",e)),l.addFilter(Shopware.Data.Criteria.equals("productId",t));let d=await s.search(l,Shopware.Context.api);d.total>0?i=d.first():((i=s.create(Shopware.Context.api)).customerId=e,i.productId=t),i.price=[{quantityStart:1,quantityEnd:null,price:[{currencyId:Shopware.Context.app.systemCurrencyId,net:r.toFixed(2),gross:(r*(1+c/100)).toFixed(2),linked:!0}]}],await s.save(i,Shopware.Context.api)},async exportCSV(){this.isExporting=!0;let e=this.repositoryFactory.create("custom_price"),t=new Shopware.Data.Criteria;t.addAssociation("customer"),t.addAssociation("product");let r=await e.search(t,Shopware.Context.api);if(!r||0===r.total){this.isExporting=!1;return}let i="Customer ID,Customer Tier Name,SKU,Product Name,Custom MSRP,Custom WS Price\n"+r.map(e=>{let t=e.customerId||"N/A",r=e.customer?`${e.customer.firstName} ${e.customer.lastName}`:"Unknown Customer",i=e.product?.productNumber||"N/A",s=e.product?.name?`"${e.product.name}"`:"Unknown Product",a="N/A";return e.price&&Array.isArray(e.price)&&e.price.length>0&&Array.isArray(e.price[0])&&e.price[0].length>0&&(a=e.price[0][0].net||"0.00"),`${t},"${r}",${i},${s},,${a}`}).join("\n"),s=new Blob([i],{type:"text/csv"}),a=new Date,o=`${a.getMonth()+1}.${a.getDate()}.${a.getFullYear().toString().slice(2)}`,n=`M2 VB Display All Mageworx Custom Pricing - ${o}.csv`,c=window.URL.createObjectURL(s),l=document.createElement("a");l.href=c,l.setAttribute("download",n),document.body.appendChild(l),l.click(),document.body.removeChild(l),this.isExporting=!1}}});let{Component:a,Mixin:o}=Shopware;a.register("customer-specific-price-list",{template:'<template>\n\n    <sw-page :headerBorderColor="\'#00A1FF\'" class="customer-specific-price-list">\n        <template #smart-bar-header>\n            <sw-page-title class="customPricesTitle">Add Custom Price</sw-page-title>\n            <div class="customPricesBtnWrapper">\n                <sw-data-csv @import-start="isImporting = true" @import-finish="handleImportFinish"></sw-data-csv>            \n                    <sw-button\n                        variant="primary"\n                        @click="openAddCustomPriceModal"\n                        class="sw-page__header-add-credit-button"\n                >\n                    Add Custom Price\n                </sw-button>\n            </div>\n        </template>\n        <template #content>\n            <div v-if="isImporting" class="csv-loader-container">\n                <sw-loader></sw-loader>\n                <p class="importing-description">Importing CSV...</p>\n            </div>\n            <sw-data-grid :dataSource="prices" :columns="columns" :isLoading="isLoading">\n                <template #column-customerName="{ item }">\n                <sw-skeleton-bar v-if="isLoading" />\n                <a v-else :href="`/admin#/sw/customer/detail/${item.customerId}/base`" class="link">\n                    {{ item.customerName }}\n                </a>\n            </template>   <template #column-product="{ item }">\n                <sw-skeleton-bar v-if="isLoading" />\n                <span v-else>{{ item.product }}</span>\n            </template>\n            <template #column-netPrice="{ item }">\n                <sw-skeleton-bar v-if="isLoading" />\n                <span v-else>{{ item.netPrice }}</span>\n            </template>\n\n            <template #column-grossPrice="{ item }">\n                <sw-skeleton-bar v-if="isLoading" />\n                <span v-else>{{ item.grossPrice }}</span>\n            </template>\n                <template #actions="{ item }">\n                    <sw-context-menu-item\n                            @click="openEditCustomPriceModal(item)"\n                    >\n                        Edit\n                    </sw-context-menu-item>\n                    <sw-context-menu-item\n                            @click="openDeleteModal(item.id)"\n                            variant="danger"\n                    >\n                        Delete\n                    </sw-context-menu-item>\n                </template>\n            </sw-data-grid>\n\n            <div>\n                <sw-pagination :total="total" :limit="limit" @limitChange="onPageChange" :page="page" @pageChange="onPageChange"></sw-pagination>\n            </div>\n        </template>\n    </sw-page>\n    <sw-modal v-if="showDeleteModal" @modal-close="closeDeleteModal">\n        <template #modal-header>\n            <h2>Confirm Deletion</h2>\n        </template>\n\n        <p>Are you sure you want to delete this custom price?</p>\n\n        <template #modal-footer>\n            <sw-button variant="primary" @click="confirmDelete">Yes, Delete</sw-button>\n            <sw-button variant="secondary" @click="closeDeleteModal">Cancel</sw-button>\n        </template>\n    </sw-modal>\n    <sw-modal\n            v-if="showAddCustomPriceModal"\n            title="Add Custom Price"\n            @modal-close="showAddCustomPriceModal = false"\n            size="large"\n            class="custom-medium-modal"\n    >\n        <sw-tabs>\n            <sw-tabs-item\n                    :active="selectedTab === \'customer\'"\n                    @click="selectedTab = \'customer\'"\n            >\n                Customer\n            </sw-tabs-item>\n            <sw-tabs-item\n                    :active="selectedTab === \'product\'"\n                    @click="selectedTab = \'product\'"\n            >\n                Product\n            </sw-tabs-item>\n            <sw-tabs-item\n                    :active="selectedTab === \'price\'"\n                    @click="selectedTab = \'price\'"\n            >\n                Price\n            </sw-tabs-item>\n        </sw-tabs>\n        <div class="tab-content">\n            <div v-if="selectedTab === \'customer\'">\n                <sw-customer-select v-model:value="selectedCustomer"/>\n            </div>\n            <div v-if="selectedTab === \'product\'">\n                <sw-product-select v-model:value="selectedProduct"/>\n            </div>\n            <div v-if="selectedTab === \'price\'">\n                <sw-card title="Amount">\n                    <sw-number-field\n                            v-model:value="newCustomerAmount"\n                            :min="0.00"\n                            :step="1.00"\n                            :number-type="\'float\'"\n                            placeholder="Enter amount"\n                    />\n                </sw-card>\n            </div>\n        </div>\n        <template #modal-footer>\n            <sw-button @click="addOrUpdateCustomPrice" size="small" variant="primary">\n                Submit\n            </sw-button>\n            <sw-button @click="showAddCustomPriceModal = false" size="small" variant="danger">\n                Cancel\n            </sw-button>\n        </template>\n    </sw-modal>\n    <sw-modal\n            v-if="showEditCustomPriceModal"\n            title="Edit Custom Price"\n            @modal-close="showEditCustomPriceModal = false"\n            size="medium"\n    >\n        <sw-card>\n            <sw-number-field\n                    v-model:value="newCustomerAmount"\n                    label="Amount"\n                    :min="0.00"\n                    :step="1.00"\n                    :number-type="\'float\'"\n                    placeholder="Enter new price"\n            />\n        </sw-card>\n\n        <template #modal-footer>\n            <sw-button @click="addOrUpdateCustomPrice" size="small" variant="primary">\n                Save Changes\n            </sw-button>\n            <sw-button @click="showEditCustomPriceModal = false" size="small" variant="danger">\n                Cancel\n            </sw-button>\n        </template>\n    </sw-modal>\n\n</template>',inject:["repositoryFactory"],mixins:[o.getByName("notification")],data(){return{isLoading:!1,isImporting:!1,prices:[],total:0,page:1,limit:10,showDeleteModal:!1,deleteRecordId:null,showAddCustomPriceModal:!1,showEditCustomPriceModal:!1,selectedTab:"customer",selectedCustomer:null,selectedProduct:null,newCustomerAmount:null,columns:[{property:"id",label:"#ID",visible:!1},{property:"customerName",label:"Customer Name",sortable:!0},{property:"product",label:"Product",sortable:!0},{property:"netPrice",label:"Net Price",sortable:!0},{property:"grossPrice",label:"Gross Price",sortable:!0},{property:"created_at",label:"Created At",sortable:!0}]}},created(){this.fetchCustomPrices()},watch:{selectedCustomer(e){this.fetchExistingPrice()},selectedProduct(e){this.fetchExistingPrice()}},methods:{handleImportFinish(){this.isImporting=!1,this.fetchCustomPrices()},resetForm(){this.selectedCustomer=null,this.selectedProduct=null,this.newCustomerAmount=null,this.showAddCustomPriceModal=!1},onPageChange(e){if("object"==typeof e)e.page&&(this.page=parseInt(e.page,10)),e.limit&&(this.limit=parseInt(e.limit,10));else{if("number"!=typeof e||!(e>0))return;this.page=parseInt(e,10)}this.fetchCustomPrices()},openAddCustomPriceModal(){this.showAddCustomPriceModal=!0},async confirmDelete(){try{let e=this.repositoryFactory.create("custom_price");await e.delete(this.deleteRecordId,Shopware.Context.api),this.createNotificationSuccess({title:"Success",message:"The custom price has been deleted successfully."}),this.fetchCustomPrices()}catch(e){this.createNotificationError({title:"Error",message:"Failed to delete the custom price. Please try again."})}this.closeDeleteModal()},openDeleteModal(e){this.deleteRecordId=e,this.showDeleteModal=!0},closeDeleteModal(){this.showDeleteModal=!1,this.deleteRecordId=null},openEditCustomPriceModal(e){this.selectedCustomer=e.customerId,this.selectedProduct=e.productId,e.netPrice?this.newCustomerAmount=parseFloat(e.netPrice):this.newCustomerAmount=null,this.showEditCustomPriceModal=!0},async fetchCustomPrices(){this.isLoading=!0;try{let e=this.repositoryFactory.create("custom_price"),t=this.createCriteria(),r=await e.search(t,Shopware.Context.api);this.prices=r.map(e=>({id:e.id,customerId:e.customerId,customerName:e.customer?`${e.customer.firstName} ${e.customer.lastName}`:"N/A",productId:e.productId,product:e.product?.translated?.name||e.product?.name||"N/A",netPrice:e.price?.[0]?.[0]?.net?.toFixed(2)||"N/A",grossPrice:e.price?.[0]?.[0]?.gross?.toFixed(2)||"N/A",created_at:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})),this.total=r.total||0}catch(e){console.error("Failed to fetch custom prices:",e),this.createNotificationError({title:"Error",message:"Failed to fetch custom prices. Please try again."})}finally{this.isLoading=!1}},createCriteria(){return new Shopware.Data.Criteria(this.page,this.limit).addAssociation("customer").addAssociation("product").addSorting(Shopware.Data.Criteria.sort("createdAt","DESC"))},async fetchExistingPrice(){if(!this.selectedCustomer||!this.selectedProduct){this.newCustomerAmount=null;return}try{let e=this.repositoryFactory.create("custom_price"),t=new Shopware.Data.Criteria(1,1).addFilter(Shopware.Data.Criteria.equals("customerId",this.selectedCustomer)).addFilter(Shopware.Data.Criteria.equals("productId",this.selectedProduct)),r=await e.search(t,Shopware.Context.api);this.newCustomerAmount=r.total>0?parseFloat(r.first()?.price?.[0]?.[0]?.net||null):null}catch{this.newCustomerAmount=null}},async addOrUpdateCustomPrice(e=!1){if(!this.selectedCustomer||!this.selectedProduct||!this.newCustomerAmount){this.createNotificationError({title:"Error",message:"Please enter all required fields."});return}this.isLoading=!0;try{let t=this.repositoryFactory.create("custom_price"),r=await this.repositoryFactory.create("product").get(this.selectedProduct,Shopware.Context.api),i=r.taxId&&(await this.repositoryFactory.create("tax").get(r.taxId,Shopware.Context.api))?.taxRate||0,s=parseFloat(this.newCustomerAmount),a=Shopware.Context.app.systemCurrencyId,o=new Shopware.Data.Criteria(1,1).addFilter(Shopware.Data.Criteria.equals("customerId",this.selectedCustomer)).addFilter(Shopware.Data.Criteria.equals("productId",this.selectedProduct)),n=await t.search(o,Shopware.Context.api),c=n.total>0?n.first():t.create(Shopware.Context.api);c.customerId=this.selectedCustomer,c.productId=this.selectedProduct,c.price=[{quantityStart:1,quantityEnd:null,price:[{currencyId:a,net:s.toFixed(2),gross:(s*(1+i/100)).toFixed(2),linked:!0}]}],await t.save(c,Shopware.Context.api),this.createNotificationSuccess({title:"Success",message:e?"Custom price updated successfully.":"Custom price added successfully."}),this.fetchCustomPrices(),this.showAddCustomPriceModal=!1,this.showEditCustomPriceModal=!1,this.resetForm()}catch{this.createNotificationError({title:"Error",message:"Failed to save the custom price."})}finally{this.isLoading=!1}}}}),Shopware.Module.register("customer-specific-price",{type:"plugin",name:"customer-specific-price",title:"Customer Specific Price",description:"Manage customer specific prices",color:"#ff3d3d",icon:"default-shopping-paper-bag",routes:{list:{component:"customer-specific-price-list",path:"list"}},navigation:[{id:"customer-specific-price",label:"Customer Specific Price",color:"#ff3d3d",path:"customer.specific.price.list",icon:"default-shopping-paper-bag",parent:"sw-customer",position:50}]}),r(819),Shopware.Component.override("sw-quote-line-items",{template:'{% block sw_quote_line_items_grid_actions %}\n    <template #column-persistPrice="{ item, isInlineEdit }">\n        <sw-checkbox-field\n            @update:value="(checked) => setPersistPrice(item, checked)"\n            :value="getPersistPrice(item)"\n            label="Persist Price"\n            :disabled="!acl.can(\'quote.editor\') || !isInlineEdit || loading"\n        />\n    </template>\n    {{ parent() }}\n{% endblock %}',computed:{columns(){let e=this.$super("columns");return e.unshift({property:"persistPrice",label:"Quote Price",inlineEdit:!0,sortable:!1,align:"right",allowResize:!0}),e}},methods:{getPersistPrice(e){return e?.customFields?.persistPrice??!1},setPersistPrice(e,t){e.customFields||(e.customFields={}),e.customFields.persistPrice=t}}})}()})();